{"version":3,"sources":["DdRum.ts"],"names":["timeProvider","TimeProvider","generateEmptyPromise","Promise","resolve","DdRumWrapper","NativeModules","DdRum","undefined","type","name","context","timestampMs","mappedEvent","actionEventMapper","applyEventMapper","nativeRum","stopAction","args","isNewStopActionAPI","now","isOldStopActionAPI","lastActionData","DdSdk","telemetryDebug","InternalLog","log","SdkVerbosity","WARN","startView","key","DEBUG","stopView","startAction","nativeCallArgs","getStopActionNativeCallArgs","callNativeStopAction","addAction","actionContext","startResource","method","url","stopResource","statusCode","kind","size","resourceContext","resourceEventMapper","addError","message","source","stacktrace","errorEventMapper","updatedContext","addTiming","registerErrorEventMapper","unregisterErrorEventMapper","registerResourceEventMapper","unregisterResourceEventMapper","registerActionEventMapper","unregisterActionEventMapper"],"mappings":"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","sourcesContent":["/*\n * Unless explicitly stated otherwise all files in this repository are licensed under the Apache License Version 2.0.\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright 2016-Present Datadog, Inc.\n */\n\nimport type { GestureResponderEvent } from 'react-native';\nimport { NativeModules } from 'react-native';\n\nimport { InternalLog } from '../InternalLog';\nimport { SdkVerbosity } from '../SdkVerbosity';\nimport { TimeProvider } from '../TimeProvider';\nimport { DdSdk } from '../foundation';\nimport type { DdNativeRumType } from '../nativeModulesTypes';\nimport { bufferVoidNativeCall } from '../sdk/DatadogProvider/Buffer/bufferNativeCall';\n\nimport type { ActionEventMapper } from './eventMappers/actionEventMapper';\nimport { generateActionEventMapper } from './eventMappers/actionEventMapper';\nimport type { ErrorEventMapper } from './eventMappers/errorEventMapper';\nimport { generateErrorEventMapper } from './eventMappers/errorEventMapper';\nimport type { ResourceEventMapper } from './eventMappers/resourceEventMapper';\nimport { generateResourceEventMapper } from './eventMappers/resourceEventMapper';\nimport type {\n    DdRumType,\n    RumActionType,\n    ResourceKind,\n    ErrorSource\n} from './types';\n\nconst timeProvider = new TimeProvider();\n\nconst generateEmptyPromise = () => new Promise<void>(resolve => resolve());\n\nclass DdRumWrapper implements DdRumType {\n    private nativeRum: DdNativeRumType = NativeModules.DdRum;\n    private lastActionData?: { type: RumActionType; name: string };\n    private errorEventMapper = generateErrorEventMapper(undefined);\n    private resourceEventMapper = generateResourceEventMapper(undefined);\n    private actionEventMapper = generateActionEventMapper(undefined);\n\n    startView(\n        key: string,\n        name: string,\n        context: object = {},\n        timestampMs: number = timeProvider.now()\n    ): Promise<void> {\n        InternalLog.log(\n            `Starting RUM View “${name}” #${key}`,\n            SdkVerbosity.DEBUG\n        );\n        return bufferVoidNativeCall(() =>\n            this.nativeRum.startView(key, name, context, timestampMs)\n        );\n    }\n\n    stopView(\n        key: string,\n        context: object = {},\n        timestampMs: number = timeProvider.now()\n    ): Promise<void> {\n        InternalLog.log(`Stopping RUM View #${key}`, SdkVerbosity.DEBUG);\n        return bufferVoidNativeCall(() =>\n            this.nativeRum.stopView(key, context, timestampMs)\n        );\n    }\n\n    startAction(\n        type: RumActionType,\n        name: string,\n        context: object = {},\n        timestampMs: number = timeProvider.now()\n    ): Promise<void> {\n        InternalLog.log(\n            `Starting RUM Action “${name}” (${type})`,\n            SdkVerbosity.DEBUG\n        );\n        this.lastActionData = { type, name };\n        return bufferVoidNativeCall(() =>\n            this.nativeRum.startAction(type, name, context, timestampMs)\n        );\n    }\n\n    stopAction(\n        ...args:\n            | [\n                  type: RumActionType,\n                  name: string,\n                  context?: object,\n                  timestampMs?: number\n              ]\n            | [context?: object, timestampMs?: number]\n    ): Promise<void> {\n        InternalLog.log('Stopping current RUM Action', SdkVerbosity.DEBUG);\n        const nativeCallArgs = this.getStopActionNativeCallArgs(args);\n        this.lastActionData = undefined;\n        if (!nativeCallArgs) {\n            return generateEmptyPromise();\n        }\n        return this.callNativeStopAction(...nativeCallArgs);\n    }\n\n    private callNativeStopAction = (\n        type: RumActionType,\n        name: string,\n        context: object,\n        timestampMs: number\n    ): Promise<void> => {\n        const mappedEvent = this.actionEventMapper.applyEventMapper({\n            type,\n            name,\n            context,\n            timestampMs\n        });\n        if (!mappedEvent) {\n            return bufferVoidNativeCall(() =>\n                this.nativeRum.stopAction(\n                    type,\n                    name,\n                    {\n                        '_dd.action.drop_action': true\n                    },\n                    timestampMs\n                )\n            );\n        }\n\n        return bufferVoidNativeCall(() =>\n            this.nativeRum.stopAction(\n                mappedEvent.type,\n                mappedEvent.name,\n                mappedEvent.context,\n                mappedEvent.timestampMs\n            )\n        );\n    };\n\n    private getStopActionNativeCallArgs = (\n        args:\n            | [\n                  type: RumActionType,\n                  name: string,\n                  context?: object,\n                  timestampMs?: number\n              ]\n            | [context?: object, timestampMs?: number]\n    ):\n        | [\n              type: RumActionType,\n              name: string,\n              context: object,\n              timestampMs: number\n          ]\n        | null => {\n        if (isNewStopActionAPI(args)) {\n            return [\n                args[0],\n                args[1],\n                args[2] || {},\n                args[3] || timeProvider.now()\n            ];\n        }\n        if (isOldStopActionAPI(args)) {\n            if (this.lastActionData) {\n                DdSdk.telemetryDebug(\n                    'DDdRum.stopAction called with the old signature'\n                );\n                const { type, name } = this.lastActionData;\n                return [\n                    type,\n                    name,\n                    args[0] || {},\n                    args[1] || timeProvider.now()\n                ];\n            }\n            InternalLog.log(\n                'DdRum.startAction needs to be called before DdRum.stopAction',\n                SdkVerbosity.WARN\n            );\n        } else {\n            InternalLog.log(\n                'DdRum.stopAction was called with wrong arguments',\n                SdkVerbosity.WARN\n            );\n        }\n\n        return null;\n    };\n\n    addAction(\n        type: RumActionType,\n        name: string,\n        context: object = {},\n        timestampMs: number = timeProvider.now(),\n        actionContext?: GestureResponderEvent\n    ): Promise<void> {\n        const mappedEvent = this.actionEventMapper.applyEventMapper({\n            type,\n            name,\n            context,\n            timestampMs,\n            actionContext\n        });\n        if (!mappedEvent) {\n            return generateEmptyPromise();\n        }\n        InternalLog.log(\n            `Adding RUM Action “${name}” (${type})`,\n            SdkVerbosity.DEBUG\n        );\n        return bufferVoidNativeCall(() =>\n            this.nativeRum.addAction(\n                mappedEvent.type,\n                mappedEvent.name,\n                mappedEvent.context,\n                mappedEvent.timestampMs\n            )\n        );\n    }\n\n    startResource(\n        key: string,\n        method: string,\n        url: string,\n        context: object = {},\n        timestampMs: number = timeProvider.now()\n    ): Promise<void> {\n        InternalLog.log(\n            `Starting RUM Resource #${key} ${method}: ${url}`,\n            SdkVerbosity.DEBUG\n        );\n        return bufferVoidNativeCall(() =>\n            this.nativeRum.startResource(key, method, url, context, timestampMs)\n        );\n    }\n\n    stopResource(\n        key: string,\n        statusCode: number,\n        kind: ResourceKind,\n        size: number = -1,\n        context: object = {},\n        timestampMs: number = timeProvider.now(),\n        resourceContext?: XMLHttpRequest\n    ): Promise<void> {\n        const mappedEvent = this.resourceEventMapper.applyEventMapper({\n            key,\n            statusCode,\n            kind,\n            size,\n            context,\n            timestampMs,\n            resourceContext\n        });\n        if (!mappedEvent) {\n            /**\n             * To drop the resource we call `stopResource` and pass the `_dd.drop_resource` attribute in the context.\n             * It will be picked up by the resource mappers we implement on the native side that will drop the resource.\n             * This ensures we don't have any \"started\" resource left in memory on the native side.\n             */\n            return bufferVoidNativeCall(() =>\n                this.nativeRum.stopResource(\n                    key,\n                    statusCode,\n                    kind,\n                    size,\n                    {\n                        '_dd.resource.drop_resource': true\n                    },\n                    timestampMs\n                )\n            );\n        }\n\n        InternalLog.log(\n            `Stopping RUM Resource #${key} status:${statusCode}`,\n            SdkVerbosity.DEBUG\n        );\n        return bufferVoidNativeCall(() =>\n            this.nativeRum.stopResource(\n                mappedEvent.key,\n                mappedEvent.statusCode,\n                mappedEvent.kind,\n                mappedEvent.size,\n                mappedEvent.context,\n                mappedEvent.timestampMs\n            )\n        );\n    }\n\n    addError(\n        message: string,\n        source: ErrorSource,\n        stacktrace: string,\n        context: object = {},\n        timestampMs: number = timeProvider.now()\n    ): Promise<void> {\n        const mappedEvent = this.errorEventMapper.applyEventMapper({\n            message,\n            source,\n            stacktrace,\n            context,\n            timestampMs\n        });\n        if (!mappedEvent) {\n            return generateEmptyPromise();\n        }\n        InternalLog.log(`Adding RUM Error “${message}”`, SdkVerbosity.DEBUG);\n        const updatedContext: any = mappedEvent.context;\n        updatedContext['_dd.error.source_type'] = 'react-native';\n        return bufferVoidNativeCall(() =>\n            this.nativeRum.addError(\n                mappedEvent.message,\n                mappedEvent.source,\n                mappedEvent.stacktrace,\n                updatedContext,\n                mappedEvent.timestampMs\n            )\n        );\n    }\n\n    addTiming(name: string): Promise<void> {\n        InternalLog.log(\n            `Adding timing “${name}” to RUM View`,\n            SdkVerbosity.DEBUG\n        );\n        return bufferVoidNativeCall(() => this.nativeRum.addTiming(name));\n    }\n\n    registerErrorEventMapper(errorEventMapper: ErrorEventMapper) {\n        this.errorEventMapper = generateErrorEventMapper(errorEventMapper);\n    }\n\n    unregisterErrorEventMapper() {\n        this.errorEventMapper = generateErrorEventMapper(undefined);\n    }\n\n    registerResourceEventMapper(resourceEventMapper: ResourceEventMapper) {\n        this.resourceEventMapper = generateResourceEventMapper(\n            resourceEventMapper\n        );\n    }\n\n    unregisterResourceEventMapper() {\n        this.resourceEventMapper = generateResourceEventMapper(undefined);\n    }\n\n    registerActionEventMapper(actionEventMapper: ActionEventMapper) {\n        this.actionEventMapper = generateActionEventMapper(actionEventMapper);\n    }\n\n    unregisterActionEventMapper() {\n        this.actionEventMapper = generateActionEventMapper(undefined);\n    }\n}\n\nconst isNewStopActionAPI = (\n    args:\n        | [\n              type: RumActionType,\n              name: string,\n              context?: object,\n              timestampMs?: number\n          ]\n        | [context?: object, timestampMs?: number]\n): args is [\n    type: RumActionType,\n    name: string,\n    context?: object,\n    timestampMs?: number\n] => {\n    return typeof args[0] === 'string';\n};\n\nconst isOldStopActionAPI = (\n    args:\n        | [\n              type: RumActionType,\n              name: string,\n              context?: object,\n              timestampMs?: number\n          ]\n        | [context?: object, timestampMs?: number]\n): args is [context?: object, timestampMs?: number] => {\n    return typeof args[0] === 'object' || typeof args[0] === 'undefined';\n};\n\nexport const DdRum = new DdRumWrapper();\n"]}