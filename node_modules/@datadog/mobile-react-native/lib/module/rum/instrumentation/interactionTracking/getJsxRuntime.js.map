{"version":3,"sources":["getJsxRuntime.ts"],"names":["getJsxRuntime","major","minor","require","version","split","isJsxExportedInReactVersion","Error","jsxRuntime","jsx","Number"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AAEA,OAAO,MAAMA,aAAa,GAAG,MAAM;AAC/B;AACA,QAAM,CAACC,KAAD,EAAQC,KAAR,IAAiBC,OAAO,CAAC,oBAAD,CAAP,CAA8BC,OAA9B,CAAsCC,KAAtC,CAA4C,GAA5C,CAAvB,CAF+B,CAG/B;AACA;AACA;;;AACA,MAAI,CAACC,2BAA2B,CAACL,KAAD,EAAQC,KAAR,CAAhC,EAAgD;AAC5C,UAAM,IAAIK,KAAJ,CAAU,kDAAV,CAAN;AACH,GAR8B,CAU/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,QAAMC,UAAU,GAAGL,OAAO,CAAC,mBAAD,CAA1B;;AACA,MAAI,CAACK,UAAU,CAACC,GAAhB,EAAqB;AACjB,UAAM,IAAIF,KAAJ,CAAU,qDAAV,CAAN;AACH;;AACD,SAAOC,UAAP;AACH,CAvBM;AAyBP;AACA;AACA;;AACA,MAAMF,2BAA2B,GAAG,CAACL,KAAD,EAAgBC,KAAhB,KAA2C;AAC3E,MAAIQ,MAAM,CAACT,KAAD,CAAN,GAAgB,EAApB,EAAwB;AACpB,WAAO,IAAP;AACH;;AACD,MAAIS,MAAM,CAACT,KAAD,CAAN,KAAkB,EAAlB,IAAwBS,MAAM,CAACR,KAAD,CAAN,GAAgB,EAA5C,EAAgD;AAC5C,WAAO,IAAP;AACH;;AACD,SAAO,KAAP;AACH,CARD","sourcesContent":["/*\n * Unless explicitly stated otherwise all files in this repository are licensed under the Apache License Version 2.0.\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright 2016-Present Datadog, Inc.\n */\n\nexport const getJsxRuntime = () => {\n    // eslint-disable-next-line global-require, @typescript-eslint/no-var-requires\n    const [major, minor] = require('react/package.json').version.split('.');\n    // We need to check on the version of React before requiring 'react/jsx-runtime') as\n    // it might crash other exports if the export does not exist (even if there is a try/catch).\n    // See: https://github.com/facebook/metro/issues/836\n    if (!isJsxExportedInReactVersion(major, minor)) {\n        throw new Error('React version does not support new jsx transform');\n    }\n\n    // /!\\/!\\/!\\/!\\/!\\/!\\\n    // We have to use inline require here because older React versions (below 16.14) don't have jsx-runtime.\n    // metro does not support dynamic require, so 'react/jsx-runtime' is replaced by 'react' on postinstall\n    // when react is equal or above 16.14 to avoid this require call to fail during the import phase and then\n    // disable all further imports.\n    // /!\\/!\\/!\\/!\\/!\\/!\\\n    //\n    // eslint-disable-next-line global-require, @typescript-eslint/no-var-requires\n    const jsxRuntime = require('react/jsx-runtime');\n    if (!jsxRuntime.jsx) {\n        throw new Error('React jsx runtime does not export new jsx transform');\n    }\n    return jsxRuntime;\n};\n\n/**\n * JSX Transform is available for React 16.14.0 (last React 16 version) and above\n */\nconst isJsxExportedInReactVersion = (major: string, minor: string): boolean => {\n    if (Number(major) > 16) {\n        return true;\n    }\n    if (Number(major) === 16 && Number(minor) > 13) {\n        return true;\n    }\n    return false;\n};\n"]}