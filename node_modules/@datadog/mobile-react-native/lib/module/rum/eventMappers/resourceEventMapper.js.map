{"version":3,"sources":["resourceEventMapper.ts"],"names":["EventMapper","generateResourceEventMapper","eventMapper","formatRawResourceToResourceEvent","formatResourceEventToNativeResource","formatRawResourceToNativeResource","error","additionalInformation","originalEvent","key","statusCode","kind","size","timestampMs"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AAGA,SAASA,WAAT,QAA4B,oCAA5B;AA4BA,OAAO,MAAMC,2BAA2B,GACpCC,WADuC,IAGvC,IAAIF,WAAJ,CACIE,WADJ,EAEIC,gCAFJ,EAGIC,mCAHJ,EAIIC,iCAJJ,CAHG;;AAUP,MAAMF,gCAAgC,GAAG,CACrCG,KADqC,EAErCC,qBAFqC,KAGrB;AAChB,SAAO,EACH,GAAGD,KADA;AAEH,OAAGC;AAFA,GAAP;AAIH,CARD;;AAUA,MAAMF,iCAAiC,GACnCC,KADsC,IAErB;AACjB,SAAOA,KAAP;AACH,CAJD;;AAMA,MAAMF,mCAAmC,GAAG,CACxCE,KADwC,EAExCE,aAFwC,KAGvB;AACjB,SAAO,EACH,GAAGF,KADA;AAEHG,IAAAA,GAAG,EAAED,aAAa,CAACC,GAFhB;AAGHC,IAAAA,UAAU,EAAEF,aAAa,CAACE,UAHvB;AAIHC,IAAAA,IAAI,EAAEH,aAAa,CAACG,IAJjB;AAKHC,IAAAA,IAAI,EAAEJ,aAAa,CAACI,IALjB;AAMHC,IAAAA,WAAW,EAAEL,aAAa,CAACK;AANxB,GAAP;AAQH,CAZD","sourcesContent":["/*\n * Unless explicitly stated otherwise all files in this repository are licensed under the Apache License Version 2.0.\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright 2016-Present Datadog, Inc.\n */\n\nimport type { AdditionalEventDataForMapper } from '../../sdk/EventMappers/EventMapper';\nimport { EventMapper } from '../../sdk/EventMappers/EventMapper';\nimport type { ResourceKind } from '../types';\n\ntype RawResource = {\n    readonly key: string;\n    readonly statusCode: number;\n    readonly kind: ResourceKind;\n    readonly size: number;\n    context: object;\n    readonly timestampMs: number;\n    resourceContext: XMLHttpRequest | undefined;\n};\n\ntype ResourceEvent = RawResource & AdditionalEventDataForMapper;\n\ntype NativeResource = {\n    key: string;\n    statusCode: number;\n    kind: ResourceKind;\n    size: number;\n    context: object;\n    timestampMs: number;\n};\n\nexport type ResourceEventMapper = (\n    event: ResourceEvent\n) => ResourceEvent | null;\n\nexport const generateResourceEventMapper = (\n    eventMapper: ResourceEventMapper | undefined\n) =>\n    new EventMapper(\n        eventMapper,\n        formatRawResourceToResourceEvent,\n        formatResourceEventToNativeResource,\n        formatRawResourceToNativeResource\n    );\n\nconst formatRawResourceToResourceEvent = (\n    error: RawResource,\n    additionalInformation: AdditionalEventDataForMapper\n): ResourceEvent => {\n    return {\n        ...error,\n        ...additionalInformation\n    };\n};\n\nconst formatRawResourceToNativeResource = (\n    error: RawResource\n): NativeResource => {\n    return error;\n};\n\nconst formatResourceEventToNativeResource = (\n    error: ResourceEvent,\n    originalEvent: ResourceEvent\n): NativeResource => {\n    return {\n        ...error,\n        key: originalEvent.key,\n        statusCode: originalEvent.statusCode,\n        kind: originalEvent.kind,\n        size: originalEvent.size,\n        timestampMs: originalEvent.timestampMs\n    };\n};\n"]}