{"version":3,"sources":["DdLogs.ts"],"names":["NativeModules","InternalLog","SdkVerbosity","generateEventMapper","generateEmptyPromise","Promise","resolve","DdLogsWrapper","DdLogs","undefined","message","context","status","log","DEBUG","event","logEventMapper","applyEventMapper","nativeLogs","debug","info","warn","error","registerLogEventMapper","unregisterLogEventMapper"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AAEA,SAASA,aAAT,QAA8B,cAA9B;AAEA,SAASC,WAAT,QAA4B,gBAA5B;AACA,SAASC,YAAT,QAA6B,iBAA7B;AAGA,SAASC,mBAAT,QAAoC,eAApC;;AAGA,MAAMC,oBAAoB,GAAG,MAAM,IAAIC,OAAJ,CAAkBC,OAAO,IAAIA,OAAO,EAApC,CAAnC;;AAEA,MAAMC,aAAN,CAA0C;AAAA;AAAA,wCACCP,aAAa,CAACQ,MADf;;AAAA,4CAEbL,mBAAmB,CAACM,SAAD,CAFN;;AAAA,iCAoBxB,CACVC,OADU,EAEVC,OAFU,EAGVC,MAHU,KAIM;AAChBX,MAAAA,WAAW,CAACY,GAAZ,CACK,YAAWD,MAAO,SAAQF,OAAQ,GADvC,EAEIR,YAAY,CAACY,KAFjB;AAIA,YAAMC,KAAK,GAAG,KAAKC,cAAL,CAAoBC,gBAApB,CAAqC;AAC/CP,QAAAA,OAD+C;AAE/CC,QAAAA,OAF+C;AAG/CC,QAAAA;AAH+C,OAArC,CAAd;;AAKA,UAAI,CAACG,KAAL,EAAY;AACR,eAAOX,oBAAoB,EAA3B;AACH;;AACD,aAAO,KAAKc,UAAL,CAAgBN,MAAhB,EAAwBG,KAAK,CAACL,OAA9B,EAAuCK,KAAK,CAACJ,OAA7C,CAAP;AACH,KAtCqC;AAAA;;AAItCQ,EAAAA,KAAK,CAACT,OAAD,EAAkBC,OAAe,GAAG,EAApC,EAAuD;AACxD,WAAO,KAAKE,GAAL,CAASH,OAAT,EAAkBC,OAAlB,EAA2B,OAA3B,CAAP;AACH;;AAEDS,EAAAA,IAAI,CAACV,OAAD,EAAkBC,OAAe,GAAG,EAApC,EAAuD;AACvD,WAAO,KAAKE,GAAL,CAASH,OAAT,EAAkBC,OAAlB,EAA2B,MAA3B,CAAP;AACH;;AAEDU,EAAAA,IAAI,CAACX,OAAD,EAAkBC,OAAe,GAAG,EAApC,EAAuD;AACvD,WAAO,KAAKE,GAAL,CAASH,OAAT,EAAkBC,OAAlB,EAA2B,MAA3B,CAAP;AACH;;AAEDW,EAAAA,KAAK,CAACZ,OAAD,EAAkBC,OAAe,GAAG,EAApC,EAAuD;AACxD,WAAO,KAAKE,GAAL,CAASH,OAAT,EAAkBC,OAAlB,EAA2B,OAA3B,CAAP;AACH;;AAsBDY,EAAAA,sBAAsB,CAACP,cAAD,EAAiC;AACnD,SAAKA,cAAL,GAAsBb,mBAAmB,CAACa,cAAD,CAAzC;AACH;;AAEDQ,EAAAA,wBAAwB,GAAG;AACvB,SAAKR,cAAL,GAAsBb,mBAAmB,CAACM,SAAD,CAAzC;AACH;;AA9CqC;;AAiD1C,OAAO,MAAMD,MAAM,GAAG,IAAID,aAAJ,EAAf","sourcesContent":["/*\n * Unless explicitly stated otherwise all files in this repository are licensed under the Apache License Version 2.0.\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright 2016-Present Datadog, Inc.\n */\n\nimport { NativeModules } from 'react-native';\n\nimport { InternalLog } from '../InternalLog';\nimport { SdkVerbosity } from '../SdkVerbosity';\nimport type { DdNativeLogsType } from '../nativeModulesTypes';\n\nimport { generateEventMapper } from './eventMapper';\nimport type { DdLogsType, LogEventMapper } from './types';\n\nconst generateEmptyPromise = () => new Promise<void>(resolve => resolve());\n\nclass DdLogsWrapper implements DdLogsType {\n    private nativeLogs: DdNativeLogsType = NativeModules.DdLogs;\n    private logEventMapper = generateEventMapper(undefined);\n\n    debug(message: string, context: object = {}): Promise<void> {\n        return this.log(message, context, 'debug');\n    }\n\n    info(message: string, context: object = {}): Promise<void> {\n        return this.log(message, context, 'info');\n    }\n\n    warn(message: string, context: object = {}): Promise<void> {\n        return this.log(message, context, 'warn');\n    }\n\n    error(message: string, context: object = {}): Promise<void> {\n        return this.log(message, context, 'error');\n    }\n\n    private log = (\n        message: string,\n        context: object,\n        status: keyof DdNativeLogsType\n    ): Promise<void> => {\n        InternalLog.log(\n            `Tracking ${status} log “${message}”`,\n            SdkVerbosity.DEBUG\n        );\n        const event = this.logEventMapper.applyEventMapper({\n            message,\n            context,\n            status\n        });\n        if (!event) {\n            return generateEmptyPromise();\n        }\n        return this.nativeLogs[status](event.message, event.context);\n    };\n\n    registerLogEventMapper(logEventMapper: LogEventMapper) {\n        this.logEventMapper = generateEventMapper(logEventMapper);\n    }\n\n    unregisterLogEventMapper() {\n        this.logEventMapper = generateEventMapper(undefined);\n    }\n}\n\nexport const DdLogs = new DdLogsWrapper();\n"]}